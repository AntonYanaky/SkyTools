const p=async()=>{try{const e=await fetch("https://api.hypixel.net/v2/skyblock/bazaar");if(!e.ok)throw new Error(`${e.status}`);return(await e.json()).products}catch(e){return console.error(e),{}}},l=async()=>{try{const e=new Map,n=a=>{for(const t of a)if(t.bin&&t.item_name){const o=e.get(t.item_name);(!o||t.starting_bid<o)&&e.set(t.item_name,t.starting_bid)}},r=await fetch("https://api.hypixel.net/v2/skyblock/auctions");if(!r.ok)throw new Error(`API request failed with status ${r.status}`);const c=await r.json(),i=c.totalPages;if(console.log("Processing page 0..."),n(c.auctions),i>1){const a=[];for(let t=1;t<i;t++){const o=fetch(`https://api.hypixel.net/v2/skyblock/auctions?page=${t}`).then(s=>s.ok?s.json():(console.error(`Failed to fetch page ${t}, status: ${s.status}`),{auctions:[]})).then(s=>{n(s.auctions),console.log(`Finished processing page ${t}`)});a.push(o)}await Promise.all(a)}return console.log("All pages processed."),e}catch(e){return console.error("Failed to fetch and process auction data:",e),new Map}};export{p as a,l as g};
